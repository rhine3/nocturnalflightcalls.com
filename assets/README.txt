
# NFCS2 Source code

README.txt

Last modified June 12, 2022

Tessa Rhinehart

## About
This directory contains files used to work with annotations and audio files for the "Rosetta Stone" project, creating an online, easy-to-navigate website of NFCs.

## Main resources

Raw resources in this folder:
* `clean_nfcs_lmc_fall2021/` - Folder of cleaned/standardized annotations for the kearney-nfc dataset that Lauren cleaned in fall 2021. The annotations are in the subfolder `Annotations_cleaned`

Raw resources outside of this folder:
* `/bgfs/jkitzes/ter38/data/kearney-nfc/` - Folder of the audio files from John Kearney's dataset. Only a handful of these (~2000) have annotation files.

Resources generated by this folder:
* `kearney-nfc_annotations_cleaned/` - Folder containing the same annotation files as in the folder above, but renamed as necessary to correspond to audio files using the scripts described below.

* `annotation_audio_pairs.csv` - Spreadsheet where each row contains two things: (1) an annotation filename located in `kearney-nfc_annotations_cleaned` and (2) the absolute path to the corresponding audio file in the `kearney-nfc` data folder.

Resources ge
*  

## Main scripts

`0_nfc_finding.ipynb`

`1_nfc_annotation_prep_2022.ipynb` - Pairs the cleaned/standardized annotations with the corresponding audio files. Fixes the filenames

`2_nfc_extraction_testing_2022.ipynb` - This notebook tests creating short spectrograms from clips and extracting 6s audio clips centered around each clip. After creating good-enough spectrogram extraction in this file I transferred the code to `2_extraction.py` (below0 and ran it on the cluster

`2_nfc_extraction.py` > `2_nfc_extraction.out` - The scripts copied from notebook #2 above, and the output of running the scripts. Takes between 13-14 minutes to extract up to 100 calls for each of the species.

`3_nfc_extraction_testing_2022_edits.ipynb` - This notebook is another round of testing/extracting audio clips and creating spectrograms after reviewing the spectrogams and audio files. Problems included - some frequency ranges were guessed wrong, some call durations needed to be changed, and the calls were not centered in the 6s extracted clips.


## Other/old resources

* `freqs_and_durations [...].csv` - Various spreadsheets containing the estimated frequency and duration information used for extracting many calls, including:
  - `freqs_and_durations_draft.csv` - The first pass
  - `freqs_and_durations_manual_edits.csv` - Manual edits after the first round of extraction

